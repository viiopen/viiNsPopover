/**
 * nsPopover - v0.6.8 - 2016-01-22
 * http://nohros.com/nsPopover
 *
 * Copyright (c) 2016 Neylor Ohmaly
 * Licensed MIT <https://raw.github.com/nohros/nsPopover/master/LICENSE>
 */
!function(a,b,c){"use strict";var d=b.element,e=[],f=0,g=b.isDefined,h=b.module("nsPopover",[]);h.provider("nsPopover",function(){var a={angularEvent:null,container:"body",hideOnButtonClick:!0,hideOnInsideClick:!1,hideOnOutsideClick:!0,mouseRelative:"",onClose:b.noop,onOpen:b.noop,placement:"bottom|left",plain:"false",popupDelay:0,restrictBounds:!1,scopeEvent:null,template:"",theme:"ns-popover-list-theme",timeout:1.5,trigger:"click",triggerPrevent:!0};this.setDefaults=function(c){b.extend(a,c)},this.$get=function(){return{getDefaults:function(){return a}}}}),h.directive("nsPopover",["nsPopover","$rootScope","$timeout","$templateCache","$q","$http","$compile","$document","$parse",function(h,i,j,k,l,m,n,o,p){return{restrict:"A",scope:!0,link:function(q,r,s){function t(){function a(){J.cancel()}function b(){J.hide(P.timeout)}r.on("mouseout",b).on("mouseover",a),F.on("mouseout",b).on("mouseover",a),M=function(){r.off("mouseout",b).off("mouseover",a),F.off("mouseout",b).off("mouseover",a)}}function u(a,b,c,d){var e={bottom:a.bottom,height:a.height,left:a.left,right:a.right,top:a.top,width:a.width};return b&&(e.left=d.pageX,e.right=d.pageX,e.width=0),c&&(e.top=d.pageY,e.bottom=d.pageY,e.height=0),e}function v(){F.isOpen&&q.hidePopover()}function w(a){b.isObject(a)&&!1!==P.triggerPrevent&&a.preventDefault(),J.cancel(),I.display(P.popupDelay,a)}function x(b){var c=a,d=document.documentElement||document.body.parentNode||document.body,e=g(c.pageXOffset)?c.pageXOffset:d.scrollLeft,f=g(c.pageYOffset)?c.pageYOffset:d.scrollTop,h=b.getBoundingClientRect();return e||f?{bottom:h.bottom+f,left:h.left+e,right:h.right+e,top:h.top+f,height:h.height,width:h.width}:h}function y(){F.isOpen&&q.hidePopover()}function z(a,c){return a?b.isString(a)&&c?a:k.get(a)||m.get(a,{cache:!0}):""}function A(a,b,c,d,e){var f,g,h,i,j=x(a[0]),k=function(){return"center"===c?Math.round(d.left+d.width/2-j.width/2):"right"===c?d.right-j.width:d.left},l=function(){return"center"===c?Math.round(d.top+d.height/2-j.height/2):"bottom"===c?d.bottom-j.height:d.top};"top"===b?(h=d.top-j.height,i=k()):"right"===b?(h=l(),i=d.right):"bottom"===b?(h=d.bottom,i=k()):"left"===b&&(h=l(),i=d.left-j.width),!0===P.restrictBounds&&(f=x(E[0]),i=Math.max(f.left,i),g=i+j.width,g>f.width&&(i-=g-f.width)),a.css("top",h.toString()+"px").css("left",i.toString()+"px"),e&&e.length&&("top"===b||"bottom"===b?(i=d.left+d.width/2-i,e.css("left",i.toString()+"px")):(h=d.top+d.height/2-h,e.css("top",h.toString()+"px")))}function B(a){function c(a){if(a.id===d)return!0;var e=b.element(a).parent()[0];return e?e.id===d?!0:c(e):!1}if(F.isOpen&&a.target!==r[0]){var d=F[0].id;c(a.target)||q.hidePopover()}}function C(){M()}function D(a){if(a&&0!==a.length){var b=(""+a).toLowerCase();a="true"==b}else a=!1;return a}var E,F,G,H,I,J,K,L,M,N,O=h.getDefaults(),P={angularEvent:s.nsPopoverAngularEvent||O.angularEvent,container:s.nsPopoverContainer||O.container,group:s.nsPopoverGroup,hideOnButtonClick:D(s.nsPopoverHideOnButtonClick||O.hideOnButtonClick),hideOnInsideClick:D(s.nsPopoverHideOnInsideClick||O.hideOnInsideClick),hideOnOutsideClick:D(s.nsPopoverHideOnOutsideClick||O.hideOnOutsideClick),mouseRelative:s.nsPopoverMouseRelative,onClose:p(s.nsPopoverOnClose)||O.onClose,onOpen:p(s.nsPopoverOnOpen)||O.onOpen,placement:s.nsPopoverPlacement||O.placement,plain:D(s.nsPopoverPlain||O.plain),popupDelay:s.nsPopoverPopupDelay||O.popupDelay,restrictBounds:Boolean(s.nsPopoverRestrictBounds)||O.restrictBounds,scopeEvent:s.nsPopoverScopeEvent||O.scopeEvent,template:s.nsPopoverTemplate||O.template,theme:s.nsPopoverTheme||O.theme,timeout:s.nsPopoverTimeout||O.timeout,trigger:s.nsPopoverTrigger||O.trigger,triggerPrevent:s.nsPopoverTriggerPrevent||O.triggerPrevent};if(P.mouseRelative&&(P.mouseRelativeX=-1!==P.mouseRelative.indexOf("x"),P.mouseRelativeY=-1!==P.mouseRelative.indexOf("y")),I={id_:c,display:function(a,b){p(s.nsPopover)(q)!==!1&&(j.cancel(I.id_),g(a)||(a=0),P.group&&i.$broadcast("ns:popover:hide",P.group),I.id_=j(function(){if(!0!==F.isOpen){F.isOpen=!0,F.css("display","block");var a=x(r[0]);P.mouseRelative&&(a=u(a,P.mouseRelativeX,P.mouseRelativeY,b)),A(F,L,H,a,G),t(),!0===P.hideOnInsideClick&&F.on("click",y),!0===P.hideOnOutsideClick&&o.on("click",B),!0===P.hideOnButtonClick&&r.on("click",v),P.onOpen(q)}},1e3*a))},cancel:function(){j.cancel(I.id_)}},J={id_:c,hide:function(a){j.cancel(J.id_),"-1"!==a&&(g(a)||(a=1.5),J.id_=j(function(){F.off("click",y),o.off("click",B),r.off("click",v),F.isOpen=!1,I.cancel(),F.css("display","none"),C(),P.onClose(q)},1e3*a))},cancel:function(){j.cancel(J.id_)}},E=o.find(P.container),E.length||(E=o.find("body")),K=P.placement.match(/^(top|bottom|left|right)$|((top|bottom)\|(center|left|right)+)|((left|right)\|(center|top|bottom)+)/),!K)throw new Error('"'+P.placement+'" is not a valid placement or has an invalid combination of placements.');L=K[6]||K[3]||K[1],H=K[7]||K[4]||K[2]||"center",f+=1,F=d('<div id="nspopover-'+f+'"></div>').addClass("ns-popover-"+L+"-placement").addClass("ns-popover-"+H+"-align").css("position","absolute").css("display","none"),e.push(F),q.hidePopover=function(){J.hide(0)},q.$on("ns:popover:hide",function(a,b){P.group===b&&q.hidePopover()}),q.$on("$destroy",function(){F.remove(),N()}),b.isString(P.angularEvent)?N=i.$on(P.angularEvent,w):b.isString(P.scopeEvent)?N=q.$on(P.scopeEvent,w):(r.on(P.trigger,w),N=function(){r.off(P.trigger,w)}),l.when(z(P.template,P.plain)).then(function(a){b.isObject(a)&&(a=b.isString(a.data)?a.data:""),F.html(a),P.theme&&F.addClass(P.theme),n(F)(q),G=d(F[0].querySelectorAll(".triangle")),E.append(F)})}}}])}(window,window.angular);